//引用pg模块
var pg = require('pg');
/*
数据库连接串及其解释
var conString = "数据库类型：//用户名：密码 @ 服务器名称：端口号/数据库名称"；
*/
var conString = "postgres://postgres:1234 @ 127.0.0.1:5432/postgres"
//新建客户端对象
var client = new pg.Client(conString);
var PG = function(){
	console.log("准备向****数据库连接****")
};
//获得连接
PG.prototype.getConnection = function(){
	client.connect(function(err){
		if(err){
			return console.error('could not connect to postgres', err);
		}
		client.query('SELECT NOW() AS "theTime"', function(err, result){
			if(err){
				return console.error('error running query', err);
			}
			console.log("postgres数据库连接成功")
		})
	})
};
//调用连接函数
PG.prototype.getConnection();
//模块输出
module.exports = new PG();
